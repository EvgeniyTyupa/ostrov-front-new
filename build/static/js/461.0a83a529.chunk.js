"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[461],{6820:function(e,r,t){t.d(r,{Z:function(){return l}});t(2791);var o=t(3168),n=t(364),a=t(3504),c="Breadcrumbs_main__Pfxmq",i="Breadcrumbs_block__esy2n",s=t(184),l=(0,n.$j)((function(e){return{currentlanguage:e.common.currentlanguage}}),null)((function(e){e.currentlanguage;var r=e.active,t=e.items,n=(0,o.$)().t;return(0,s.jsxs)("div",{className:c,children:[(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)(a.OL,{to:"/",children:n("navigation.breadcrumbMain")}),(0,s.jsx)("span",{children:">"})]}),t&&t.map((function(e){return(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)(a.OL,{to:e.href,children:e.title}),(0,s.jsx)("span",{children:">"})]},e.href)})),(0,s.jsx)("p",{children:r})]})}))},5239:function(e,r,t){var o=t(1413),n=t(9439),a=t(4942),c=t(2791),i=t(7227),s=t(7391),l=t(5229),u=t(1879),d=t(3168),m=t(184),h=(0,l.Z)((function(e){return{root:{background:"white","& label.Mui-focused":{color:"#4B5EA3"},"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#4B5EA3"},"& .MuiOutlinedInput-root":(0,a.Z)({borderRadius:0},"borderRadius","4px"),"& .MuiFormHelperText-root.Mui-error":{margin:0,marginTop:5},"& .MuiAutocomplete-endAdornment":{width:"fit-content !important"}}}}));r.Z=function(e){var r=e.onSearch,t=e.items,a=e.value,l=e.error,f=e.setValue,p=e.name,v=e.label,x=e.defaultValue,g=e.city,j=e.setCurrentValue,_=e.placeholder,C=e.disabled,b=h(),k=(0,d.$)().t,Z=(0,c.useState)(""),y=(0,n.Z)(Z,2),S=y[0],N=y[1],P=(0,u.Z)(S,500);return(0,c.useEffect)((function(){P&&("city"===p?r(S):"warehouse"===p&&g&&r(g.MainDescription,S))}),[P,g]),(0,c.useEffect)((function(){0===S.length&&f(p,null)}),[S]),(0,m.jsx)(i.Z,{disablePortal:!0,disabled:C,options:t,value:a,noOptionsText:k("catalog.empty"),getOptionLabel:function(e){return e.Present?e.Present:e.Description},onChange:function(e,r){f(p,r),"city"===p&&f("warehouse",null),j(r)},filterSelectedOptions:!0,limitTags:250,isOptionEqualToValue:function(e,r){return e.Present?e.Present===r.Preset:e.MainDescription===r.MainDescription},style:{width:"100%"},defaultValue:x,renderInput:function(e){return(0,m.jsx)(s.Z,(0,o.Z)((0,o.Z)({},e),{},{classes:b,placeholder:_,label:v,error:!!l,helperText:l?l.message:null,onChange:function(e){return N(e.target.value)}}))}})}},9461:function(e,r,t){t.r(r),t.d(r,{default:function(){return Pe}});var o=t(9439),n=t(2791),a=t(364),c=t(6871),i=t(8813),s=t(8297),l=t(8908),u=t(8845),d=t(6151),m=t(3168),h=t(3504),f=t(7462),p=t(3366),v=t(8182),x=t(767),g=t(5916),j=t(1046),_=t(5159),C=t(208);function b(e){return(0,_.Z)("MuiFormGroup",e)}(0,C.Z)("MuiFormGroup",["root","row"]);var k=t(184),Z=["className","row"],y=(0,g.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,r){var t=e.ownerState;return[r.root,t.row&&r.row]}})((function(e){var r=e.ownerState;return(0,f.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},r.row&&{flexDirection:"row"})})),S=n.forwardRef((function(e,r){var t=(0,j.Z)({props:e,name:"MuiFormGroup"}),o=t.className,n=t.row,a=void 0!==n&&n,c=(0,p.Z)(t,Z),i=(0,f.Z)({},t,{row:a}),s=function(e){var r=e.classes,t={root:["root",e.row&&"row"]};return(0,x.Z)(t,b,r)}(i);return(0,k.jsx)(y,(0,f.Z)({className:(0,v.Z)(s.root,o),ownerState:i,ref:r},c))})),N=t(2071),P=t(8278);var M=n.createContext(void 0),w=t(7384),D=["actions","children","defaultValue","name","onChange","value"],O=n.forwardRef((function(e,r){var t=e.actions,a=e.children,c=e.defaultValue,i=e.name,s=e.onChange,l=e.value,u=(0,p.Z)(e,D),d=n.useRef(null),m=(0,P.Z)({controlled:l,default:c,name:"RadioGroup"}),h=(0,o.Z)(m,2),v=h[0],x=h[1];n.useImperativeHandle(t,(function(){return{focus:function(){var e=d.current.querySelector("input:not(:disabled):checked");e||(e=d.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var g=(0,N.Z)(r,d),j=(0,w.Z)(i);return(0,k.jsx)(M.Provider,{value:{name:j,onChange:function(e){x(e.target.value),s&&s(e,e.target.value)},value:v},children:(0,k.jsx)(S,(0,f.Z)({role:"radiogroup",ref:g},u,{children:a}))})})),V=t(68),F=t(3400),q=t(5523),A=t(1134),R=t(9126),B=t(6856),I=t(5833),E=t(7941),T=t(8791),z=t(5239),Q=t(6987),L=t(2931),W=t(4942),U=t(2065),$=t(7278),G=t(9201),H=(0,G.Z)((0,k.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Y=(0,G.Z)((0,k.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),J=(0,g.ZP)("span")({position:"relative",display:"flex"}),X=(0,g.ZP)(H,{skipSx:!0})({transform:"scale(1)"}),K=(0,g.ZP)(Y,{skipSx:!0})((function(e){var r=e.theme,t=e.ownerState;return(0,f.Z)({left:0,position:"absolute",transform:"scale(0)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeIn,duration:r.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.shortest})})}));var ee=function(e){var r=e.checked,t=void 0!==r&&r,o=e.classes,n=void 0===o?{}:o,a=e.fontSize,c=(0,f.Z)({},e,{checked:t});return(0,k.jsxs)(J,{className:n.root,ownerState:c,children:[(0,k.jsx)(X,{fontSize:a,className:n.background,ownerState:c}),(0,k.jsx)(K,{fontSize:a,className:n.dot,ownerState:c})]})},re=t(4036),te=t(1260);function oe(e){return(0,_.Z)("MuiRadio",e)}var ne=(0,C.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),ae=["checked","checkedIcon","color","icon","name","onChange","size"],ce=(0,g.ZP)($.Z,{shouldForwardProp:function(e){return(0,g.FO)(e)||"classes"===e},name:"MuiRadio",slot:"Root",overridesResolver:function(e,r){var t=e.ownerState;return[r.root,r["color".concat((0,re.Z)(t.color))]]}})((function(e){var r=e.theme,t=e.ownerState;return(0,f.Z)({color:r.palette.text.secondary,"&:hover":{backgroundColor:(0,U.Fq)("default"===t.color?r.palette.action.active:r.palette[t.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&(0,W.Z)({},"&.".concat(ne.checked),{color:r.palette[t.color].main}),(0,W.Z)({},"&.".concat(ne.disabled),{color:r.palette.action.disabled}))}));var ie=(0,k.jsx)(ee,{checked:!0}),se=(0,k.jsx)(ee,{}),le=n.forwardRef((function(e,r){var t,o,a,c,i=(0,j.Z)({props:e,name:"MuiRadio"}),s=i.checked,l=i.checkedIcon,u=void 0===l?ie:l,d=i.color,m=void 0===d?"primary":d,h=i.icon,v=void 0===h?se:h,g=i.name,_=i.onChange,C=i.size,b=void 0===C?"medium":C,Z=(0,p.Z)(i,ae),y=(0,f.Z)({},i,{color:m,size:b}),S=function(e){var r=e.classes,t=e.color,o={root:["root","color".concat((0,re.Z)(t))]};return(0,f.Z)({},r,(0,x.Z)(o,oe,r))}(y),N=n.useContext(M),P=s,w=(0,te.Z)(_,N&&N.onChange),D=g;return N&&("undefined"===typeof P&&(a=N.value,P="object"===typeof(c=i.value)&&null!==c?a===c:String(a)===String(c)),"undefined"===typeof D&&(D=N.name)),(0,k.jsx)(ce,(0,f.Z)({type:"radio",icon:n.cloneElement(v,{fontSize:null!=(t=se.props.fontSize)?t:b}),checkedIcon:n.cloneElement(u,{fontSize:null!=(o=ie.props.fontSize)?o:b}),ownerState:y,classes:S,name:D,checked:P,onChange:w,ref:r},Z))})),ue=(0,t(5229).Z)((function(e){return{root:{"& .MuiTypography-root":{fontFamily:"Montserrat"},"& .MuiRadio-root.Mui-checked":{color:"#4B5EA3 !important"},"& .MuiRadio-root:hover":{backgroundColor:"rgba(75, 94, 163, 0.04)"}}}})),de=function(e){var r=e.label,t=e.labelAlign,o=e.value,n=ue();return(0,k.jsx)(q.Z,{classes:n,control:(0,k.jsx)(le,{value:o}),label:r,labelPlacement:t})},me=t(7163),he={main:"CheckoutForm_main__-TXpk",radioTypes:"CheckoutForm_radioTypes__uYx9i",mailOffice:"CheckoutForm_mailOffice__DhVrq",field:"CheckoutForm_field__xThQq",person:"CheckoutForm_person__oV33k",fields:"CheckoutForm_fields__remKm",row:"CheckoutForm_row__KqTL9",payment:"CheckoutForm_payment__N6g9e",comment:"CheckoutForm_comment__UbP6n",viewComment:"CheckoutForm_viewComment__csVwn",commentField:"CheckoutForm_commentField__SLPxZ",openComment:"CheckoutForm_openComment__ZatWT",recall:"CheckoutForm_recall__yelqM",submit:"CheckoutForm_submit__kjd3v"},fe=(0,a.$j)((function(e){return{user:e.user.user,cities:e.common.searchingCities,npWarehouses:e.common.npWarehouses,isAuth:e.user.isAuth,totalSum:e.cart.totalSum,siteInfo:e.common.siteInfo}}),{getWarehouses:s.aM,getCities:s.MC,setDeliveryPrice:I.h5,createOrderWithMailPost:l.Yi})((function(e){var r=e.user,t=e.getWarehouses,a=e.getCities,c=e.cities,i=e.npWarehouses,s=e.isAuth,l=e.setDeliveryPrice,u=e.totalSum,h=e.actionDiscount,f=e.gift,p=e.items,v=e.userDiscount,x=e.deliveryPrice,g=e.createOrderWithMailPost,j=e.currentPromocode,_=e.siteInfo,C=(0,A.cI)(),b=C.handleSubmit,Z=C.reset,y=C.control,S=C.setValue,N=(0,m.$)().t,P=(0,n.useState)("me"),M=(0,o.Z)(P,2),w=M[0],D=M[1],I=(0,n.useState)("mailOffice"),W=(0,o.Z)(I,2),U=W[0],$=W[1],G=(0,n.useState)(null),H=(0,o.Z)(G,2),Y=H[0],J=H[1],X=(0,n.useState)(!1),K=(0,o.Z)(X,2),ee=K[0],re=K[1],te=(0,n.useState)(!0),oe=(0,o.Z)(te,2),ne=oe[0],ae=oe[1],ce=function(e){e.delivery_type=U,e.approved=ne,e.discount=h.toString().includes("%")?Number(h.replace("%",""))+v+"%":(u/100*v+Number(h))/u*100,e.total=u,e.finaly_sum=h.toString().includes("%")?Math.ceil(Number(e.total)-Number(e.total)/100*(Number(h.replace("%",""))+v)):Math.ceil(Number(e.total)-(u/100*v+Number(h))),j?j.discount.toString().includes("%")?h.toString().includes("%")?e.finaly_sum=Math.ceil(Number(e.total)-Number(e.total)/100*(Number(h.replace("%",""))+v+Number(j.discount.replace("%","")))):e.finaly_sum=Math.ceil(u-(u/100*(v+Number(j.discount.replace("%","")))+Number(h))):h.toString().includes("%")?e.finaly_sum=Math.ceil(Number(e.total)-Number(e.total)/100*(Number(h.replace("%",""))+v+Number(j.discount)/u*100)):e.finaly_sum=Math.ceil(Number(e.total)-(u/100*v+Number(h)+Number(j.discount))):h.toString().includes("%")?e.finaly_sum=Math.ceil(Number(e.total)-Number(e.total)/100*(Number(h.replace("%",""))+v)):e.finaly_sum=Math.ceil(Number(e.total)-(u/100*v+Number(h))),j&&(e.promocode=j._id),e.receiver_info={first_name:e.first_name,last_name:e.last_name,email:e.email,phone:"+380"+e.phone,city:e.city,warehouse:e.warehouse,street:e.street,build:e.build,appartment:e.appartment},r&&(e.user=r._id);var t=[];p.forEach((function(e){t.push({count:e.count,item:e.item._id})})),e.items=t;var o=[];f.forEach((function(e){o.push({count:1,item:e._id})})),e.gift=o,e.delivery_price=0===x?0:1,g(e)};return(0,n.useEffect)((function(){r&&"me"===w&&(J(r.city),Z({first_name:r.first_name,last_name:r.last_name,phone:r.phone?r.phone.substring(4):"",email:r.email,city:r.city?r.city:null,warehouse:r.warehouse?r.warehouse:null,payment_type:"receive",comment:"",street:"",build:"",appartment:""})),r&&"other"===w?(J(r.city),Z({first_name:"",last_name:"",phone:"",email:"",city:r.city?r.city:null,warehouse:null,payment_type:"receive",comment:""})):r||Z({city:null,warehouse:null,first_name:"",last_name:"",phone:"",email:"",payment_type:"receive",comment:"",street:"",build:"",appartment:""})}),[r,w,U]),(0,n.useEffect)((function(){Y&&"mailOffice"===U&&t(Y.MainDescription,"")}),[Y]),(0,n.useEffect)((function(){_&&("courier"===U&&(u>=_[0].office_delivery?l(0):l(T.B6)),"mailOffice"===U&&(u>=_[0].courier_delivery?l(0):l(T.jg)))}),[U,u,_]),(0,k.jsx)("div",{className:he.main,children:(0,k.jsxs)("form",{onSubmit:b(ce),children:[s&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h4",{children:N("checkout.receiverType")}),(0,k.jsx)("div",{className:he.radioTypes,children:(0,k.jsxs)(O,{row:!0,value:w,onChange:function(e){D(e.target.value)},style:{gap:"45px"},children:[(0,k.jsx)(de,{label:N("checkout.receiverMe"),labelAlign:"end",value:"me"}),(0,k.jsx)(de,{label:N("checkout.receiverOther"),labelAlign:"end",value:"other"})]})})]}),(0,k.jsxs)("div",{className:he.person,children:[(0,k.jsx)("h4",{children:N("checkout.personTitle")}),(0,k.jsxs)("div",{className:he.fields,children:[(0,k.jsxs)(me.Z,{className:he.row,children:[(0,k.jsx)(A.Qr,{name:"first_name",control:y,defaultValue:"",rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,value:o,error:n,label:N("profile.account.name")})}}),(0,k.jsx)(A.Qr,{name:"last_name",control:y,defaultValue:"",rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,value:o,error:n,label:N("profile.account.form.last_name")})}})]}),(0,k.jsxs)(me.Z,{className:he.row,children:[(0,k.jsx)(A.Qr,{name:"phone",control:y,defaultValue:"",rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,error:n,value:o,regex:"number",startAdornment:!0,startAdornmentIcon:(0,k.jsx)("span",{children:"+380"})})}}),(0,k.jsx)(A.Qr,{name:"email",control:y,defaultValue:"",rules:{pattern:{value:/^[A-Za-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}/,message:N("errors.email")}},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)("div",{className:he.emailContainer,children:(0,k.jsx)(Q.Z,{onChange:t,placeholder:N("checkout.notRequired"),value:o,error:n,label:"Email",startAdornment:!0,startAdornmentIcon:(0,k.jsx)(B.yr3,{})})})}})]})]})]}),(0,k.jsx)("h4",{children:N("checkout.deliveryType")}),(0,k.jsx)("div",{className:he.radioTypes,children:(0,k.jsxs)(O,{row:!0,value:U,onChange:function(e){$(e.target.value)},style:{gap:"45px"},children:[(0,k.jsx)(de,{label:N("checkout.office"),labelAlign:"end",value:"mailOffice"}),(0,k.jsx)(de,{label:N("checkout.courier"),labelAlign:"end",value:"courier"})]})}),"mailOffice"===U&&(0,k.jsxs)("div",{className:he.mailOffice,children:[(0,k.jsxs)(me.Z,{className:he.field,children:[(0,k.jsx)("label",{children:N("profile.account.form.city")}),(0,k.jsx)(A.Qr,{name:"city",control:y,defaultValue:null,rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(z.Z,{value:o,onChange:t,error:n,items:c,setValue:S,name:"city",disabled:!1,onSearch:a,setCurrentValue:J,placeholder:N("profile.account.form.city")})}})]}),(0,k.jsxs)(me.Z,{className:(0,E.cx)(he.field,he.lastField),children:[(0,k.jsx)("label",{children:N("profile.account.form.postNumber")}),(0,k.jsx)(A.Qr,{name:"warehouse",control:y,defaultValue:null,rules:{required:N("errors.required")},render:function(e){var r=e.field,o=r.onChange,n=r.value,a=e.fieldState.error;return(0,k.jsx)(z.Z,{value:n,error:a,onChange:o,items:i,setValue:S,name:"warehouse",disabled:!Y,onSearch:t,city:Y,placeholder:N("profile.account.form.number")})}})]})]}),"courier"===U&&(0,k.jsxs)("div",{className:he.courier,children:[(0,k.jsxs)(me.Z,{className:he.field,children:[(0,k.jsx)("label",{children:N("profile.account.form.city")}),(0,k.jsx)(A.Qr,{name:"city",control:y,defaultValue:null,rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(z.Z,{value:o,onChange:t,error:n,items:c,setValue:S,name:"city",disabled:!1,onSearch:a,setCurrentValue:J,placeholder:N("profile.account.form.city")})}})]}),(0,k.jsxs)(me.Z,{className:he.row,children:[(0,k.jsxs)(me.Z,{className:he.field,children:[(0,k.jsx)("label",{children:N("checkout.street")}),(0,k.jsx)(A.Qr,{name:"street",control:y,defaultValue:"",rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,error:n,value:o,placeholder:N("checkout.street")})}})]}),(0,k.jsxs)(me.Z,{className:he.field,children:[(0,k.jsx)("label",{children:N("checkout.build")}),(0,k.jsx)(A.Qr,{name:"build",control:y,defaultValue:"",rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,error:n,value:o,placeholder:N("checkout.build")})}})]}),(0,k.jsxs)(me.Z,{className:he.field,children:[(0,k.jsx)("label",{children:N("checkout.appartment")}),(0,k.jsx)(A.Qr,{name:"appartment",control:y,defaultValue:"",rules:{required:N("errors.required")},render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,error:n,value:o,placeholder:N("checkout.appartment")})}})]})]})]}),(0,k.jsxs)("div",{className:he.payment,children:[(0,k.jsx)("h4",{children:N("checkout.paymentType")}),(0,k.jsx)(A.Qr,{name:"payment_type",control:y,defaultValue:"receive",render:function(e){var r=e.field,t=r.onChange,o=r.value;e.fieldState.error;return(0,k.jsxs)(O,{row:!0,value:o,onChange:t,style:{gap:"45px"},children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(de,{label:N("checkout.paymentReceive.text"),labelAlign:"end",value:"receive"}),(0,k.jsx)(V.Z,{title:N("checkout.paymentReceive.tooltip"),children:(0,k.jsx)(F.Z,{style:{fontSize:"18px",color:"#4B5EA3",padding:0},children:(0,k.jsx)(R.gH_,{})})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(de,{label:N("checkout.paymentCreditCard.text"),labelAlign:"end",value:"online"}),(0,k.jsx)(V.Z,{title:N("checkout.paymentCreditCard.tooltip"),children:(0,k.jsx)(F.Z,{style:{fontSize:"18px",color:"#4B5EA3",padding:0},children:(0,k.jsx)(R.gH_,{})})})]})]})}})]}),(0,k.jsxs)("div",{className:he.comment,children:[(0,k.jsx)("span",{onClick:function(){re(!ee)},className:he.viewComment,children:N("checkout.addComment")}),(0,k.jsx)("div",{className:(0,E.cx)(he.commentField,ee?he.openComment:""),children:(0,k.jsx)(A.Qr,{name:"comment",control:y,defaultValue:"",render:function(e){var r=e.field,t=r.onChange,o=r.value,n=e.fieldState.error;return(0,k.jsx)(Q.Z,{onChange:t,value:o,error:n,multiline:!0,rows:6,placeholder:N("checkout.addCommentPlaceholder")})}})})]}),(0,k.jsxs)("div",{className:he.recall,children:[(0,k.jsx)(q.Z,{style:{marginLeft:"0"},control:(0,k.jsx)(L.Z,{onChange:function(){ae(!ne)},checked:ne}),label:N("checkout.recall")}),(0,k.jsx)(V.Z,{title:N("checkout.recallTooltip"),children:(0,k.jsx)(F.Z,{style:{fontSize:"18px",color:"#4B5EA3",padding:0},children:(0,k.jsx)(R.gH_,{})})})]}),(0,k.jsx)(d.Z,{onClick:b(ce),className:he.submit,children:N("checkout.submit")})]})})})),pe=t(6820),ve=t(3270),xe=t(6156),ge=t(1469),je=t(6078),_e=t(6434),Ce=t(5920),be={main:"Checkout_main__uPCbE",sides:"Checkout_sides__A3xDn",left:"Checkout_left__32RtX",right:"Checkout_right__aAk60",card:"Checkout_card__cBoJJ",list:"Checkout_list__fgcaq",header:"Checkout_header__cr9BN",items:"Checkout_items__3ARBi",fieldCard:"Checkout_fieldCard__zlGSO",fieldTotal:"Checkout_fieldTotal__X+MZo",promocodeBlock:"Checkout_promocodeBlock__MvRBR",addPromocodeButt:"Checkout_addPromocodeButt__CncLd",promoInputBlock:"Checkout_promoInputBlock__7pqr2",openPromo:"Checkout_openPromo__2YgYO",submitPromoBut:"Checkout_submitPromoBut__Bht5I",promoSuccess:"Checkout_promoSuccess__v6e06"},ke=t(7692),Ze=t(5627),ye=t(1272),Se=t(4270),Ne=function(e){var r=e.items,t=e.totalSum,a=e.totalCount,c=e.deliveryPrice,i=e.actionDiscount,s=e.gift,l=e.userDiscount,u=e.orderDone,f=e.serverMessage,p=e.closeOrderDoneModal,v=e.isUsePromocode,x=e.handleUsePromocode,g=e.promocodeValue,j=e.setPromocodeValue,_=e.checkPromocode,C=e.currentPromocode,b=e.receivePromocodeStatus,Z=e.currentLanguage,y=(e.siteInfo,(0,m.$)().t),S=[{href:"/shopping_cart",title:y("shopping_cart.cart")}],N=(0,n.useState)("0"),P=(0,o.Z)(N,2),M=P[0],w=P[1];return(0,n.useEffect)((function(){C?C.discount.toString().includes("%")?i.toString().includes("%")?w(Number(i.replace("%",""))+Number(C.discount.replace("%",""))+l+"%"):w(Math.ceil(t/100*(l+Number(C.discount.replace("%","")))+Number(i))):i.toString().includes("%")?w(Number(i.replace("%",""))+l+Number(C.discount)/t*100+"%"):w(Math.ceil(t/100*l+Number(i)+Number(C.discount))):i.toString().includes("%")?w(Number(i.replace("%",""))+l+"%"):w(Math.ceil(t/100*l+Number(i)))}),[C,i,l,t]),(0,k.jsx)(je.Z,{className:be.container,children:(0,k.jsxs)(ge.Z,{className:be.main,children:[(0,k.jsx)(Se.q,{htmlAttributes:{lang:"ua",amp:void 0},title:"".concat(y("siteName")," | ").concat("ru"===Z?"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"),meta:[{name:"description",content:y("siteDescription")}]}),u&&(0,k.jsx)(xe.Z,{text:f,onClose:p}),(0,k.jsx)(pe.Z,{active:y("checkout.title"),items:S}),(0,k.jsxs)(ye.Z,{className:be.sides,children:[(0,k.jsx)("div",{className:be.left,children:(0,k.jsx)(fe,{actionDiscount:i,gift:s,userDiscount:l,deliveryPrice:c,currentPromocode:C,items:r})}),(0,k.jsx)("div",{className:be.right,children:(0,k.jsxs)("div",{className:be.card,children:[(0,k.jsxs)("div",{className:be.list,children:[(0,k.jsxs)("div",{className:be.header,children:[(0,k.jsx)("h5",{children:y("checkout.yourOrder")}),(0,k.jsx)(h.OL,{to:"/shopping_cart",children:y("checkout.edit")})]}),(0,k.jsxs)("div",{className:be.items,children:[r.map((function(e){return(0,k.jsx)(ve.Z,{type:"checkout",item:e},e.item._id)})),s.map((function(e){return(0,k.jsx)(ve.Z,{type:"gift",item:{item:e},gift:s},e._id)}))]})]}),(0,k.jsxs)("div",{className:be.fieldCard,children:[(0,k.jsx)("span",{children:y("shopping_cart.totalResultShort")}),(0,k.jsxs)("p",{children:[a," ",s.length>0&&"+ ".concat(s.length)," ",(0,k.jsx)("span",{children:"\u0448\u0442."})]})]}),(0,k.jsxs)("div",{className:be.fieldCard,children:[(0,k.jsxs)("span",{children:[y("shopping_cart.onSum"),":"]}),(0,k.jsxs)("p",{children:[(0,Ce.Q)(t)," ",(0,k.jsx)("span",{children:"\u0433\u0440\u043d."})]})]}),0===c&&(0,k.jsxs)("div",{className:be.fieldCard,children:[(0,k.jsxs)("span",{children:[y("shopping_cart.delivery"),":"]}),(0,k.jsx)("p",{children:(0,k.jsx)("span",{children:"\u0411\u0435\u0437\u043a\u043e\u0448\u0442\u043e\u0432\u043d\u043e"})})]}),(0,k.jsxs)("div",{className:be.fieldCard,children:[(0,k.jsxs)("span",{children:[y("shopping_cart.discount"),":"]}),(0,k.jsxs)("p",{children:[(0,Ce.Q)(i)," ",!i.toString().includes("%")&&(0,k.jsx)("span",{children:"\u0433\u0440\u043d."})]})]}),l>0&&(0,k.jsxs)("div",{className:be.fieldCard,children:[(0,k.jsxs)("span",{children:[y("shopping_cart.userDiscount"),":"]}),(0,k.jsxs)("p",{children:[(0,Ce.Q)(l),"%"]})]}),(0,k.jsxs)("div",{className:(0,E.cx)(be.fieldCard,be.fieldTotal),children:[(0,k.jsxs)("span",{children:[y("shopping_cart.total"),":"]}),(0,k.jsxs)("p",{children:[(0,Ce.Q)((0,_e.a)(t,M)),(0,k.jsx)("span",{children:" \u0433\u0440\u043d."})]})]}),C?(0,k.jsxs)("p",{className:be.promoSuccess,children:[y("checkout.promocodeApply")," ",C.discount.includes("%")?C.discount:C.discount+" \u0433\u0440\u043d."]}):(0,k.jsxs)("div",{className:be.promocodeBlock,children:[(0,k.jsx)("button",{onClick:x,className:be.addPromocodeButt,children:y("checkout.addPromocode")}),(0,k.jsxs)("div",{className:(0,E.cx)(be.promoInputBlock,v?be.openPromo:""),children:[(0,k.jsx)(Q.Z,{value:g,onChange:j,placeholder:y("checkout.promocodePlaceholder"),endAdornment:!0,endAdornmentIcon:(0,k.jsx)(d.Z,{className:be.submitPromoBut,onClick:_,children:(0,k.jsx)(ke.OEZ,{})})}),b&&(0,k.jsx)(Ze.Z,{text:y("checkout.promocodeError")})]})]})]})})]})]})})},Pe=(0,a.$j)((function(e){return{isFetching:e.common.isFetching,totalCount:e.cart.totalCount,totalSum:e.cart.totalSum,cartItems:e.cart.items,deliveryPrice:e.cart.deliveryPrice,actionDiscount:e.cart.actionDiscount,gift:e.cart.gift,user:e.user.user,orderDone:e.orders.orderDone,serverMessage:e.common.serverMessage,currentPromocode:e.promocodes.currentPromocode,receivePromocodeStatus:e.promocodes.receivePromocodeStatus,currentLanguage:e.common.currentLanguage,siteInfo:e.common.siteInfo}}),{setServerMessage:s.UC,setOrderDone:l.DQ,checkPromocode:u.Vv,setReceivePromocodeStatus:u.gY})((function(e){var r=e.isFetching,t=e.totalCount,a=e.totalSum,s=e.cartItems,l=e.deliveryPrice,u=e.actionDiscount,d=e.gift,m=e.user,h=e.orderDone,f=e.serverMessage,p=e.setServerMessage,v=e.setOrderDone,x=e.checkPromocode,g=e.currentPromocode,j=e.receivePromocodeStatus,_=e.setReceivePromocodeStatus,C=e.currentLanguage,b=e.siteInfo,Z=(0,c.s0)(),y=(0,n.useState)(0),S=(0,o.Z)(y,2),N=S[0],P=S[1],M=(0,n.useState)(!1),w=(0,o.Z)(M,2),D=w[0],O=w[1],V=(0,n.useState)(""),F=(0,o.Z)(V,2),q=F[0],A=F[1];return(0,n.useEffect)((function(){var e=localStorage.getItem("shopping_cart");JSON.parse(e)||Z("/")}),[]),(0,n.useEffect)((function(){P(m&&m.discount?m.discount:0)}),[m]),(0,k.jsxs)(k.Fragment,{children:[r&&(0,k.jsx)(i.Z,{}),(0,k.jsx)(Ne,{items:s,totalCount:t,totalSum:a,deliveryPrice:l,gift:d,actionDiscount:u,userDiscount:N,orderDone:h,serverMessage:f,closeOrderDoneModal:function(){v(!1),p(null),Z("/")},isUsePromocode:D,handleUsePromocode:function(){O(!D)},promocodeValue:q,setPromocodeValue:function(e){_(!1),A(e)},checkPromocode:function(){q.length>0&&x(q)},currentPromocode:g,receivePromocodeStatus:j,currentLanguage:C,siteInfo:b})]})}))}}]);
//# sourceMappingURL=461.0a83a529.chunk.js.map